# =============================================================================
# AUTO-GENERATED FILE - DO NOT EDIT DIRECTLY
#
# Source: modems/netgear/cm2000/modem.yaml
# This file is synced from modems/ during build. Edit the source file, then run:
#     make sync
# =============================================================================

# Netgear CM2000 (Nighthawk) Configuration
# Source: Diagnostics export from issue #38 (@m4dh4tt3r-88)

manufacturer: Netgear
model: CM2000
paradigm: html

hardware:
  docsis_version: "3.1"
  release_date: "2020-08"

# Provenance tracking
sources:
  detection_hints: "[Issue #38](https://github.com/solentlabs/cable_modem_monitor/issues/38)"

default_host: "192.168.100.1"

auth:
  types:
    form_dynamic:
      # Dynamic action: modem generates /goform/Login?id=XXXXXXXXXX per page load
      # The integration must fetch the login page, extract the form action,
      # and submit to the exact URL including the ?id= parameter
      action: "/goform/Login"
      login_page: "/"
      form_selector: "form[name='loginform']"
      method: POST
      username_field: loginName
      password_field: loginPassword
      password_encoding: plain
      hidden_fields: {}
      success:
        redirect: "/DocsisStatus.htm"

  session:
    cookie_name: "session"

pages:
  public:
    - "/index.htm"

  protected:
    - "/DocsisStatus.htm"
    - "/RouterStatus.htm"

  data:
    downstream_channels: "/DocsisStatus.htm"
    upstream_channels: "/DocsisStatus.htm"
    system_info: "/DocsisStatus.htm"

parser:
  class: NetgearCM2000Parser
  module: custom_components.cable_modem_monitor.modems.netgear.cm2000.parser
  format:
    type: html
    table_layout: javascript_embedded

detection:
  pre_auth:
    - "NETGEAR"
    - "Nighthawk"
    - "/goform/Login"
  post_auth:
    - "CM2000"
    - "Nighthawk CM2000"
    - "Nighthawk"
    - "InitDsTableTagValue"
  page_hint: "/DocsisStatus.htm"

capabilities:
  - scqam_downstream
  - scqam_upstream
  - ofdm_downstream
  - ofdma_upstream
  - system_uptime
  - last_boot_time
  - hardware_version
  - software_version

actions:
  restart:
    # Dynamic endpoint: form action contains session ID (e.g., /goform/RouterStatus?id=123456)
    pre_fetch_url: "/RouterStatus.htm"
    endpoint_pattern: "RouterStatus"
    params:
      buttonSelect: "2"

# =============================================================================
# STATUS
# =============================================================================
status_info:
  status: verified
  verification_source: "https://github.com/solentlabs/cable_modem_monitor/issues/38"

# =============================================================================
# METADATA
# =============================================================================
fixtures:
  path: modems/netgear/cm2000/fixtures
  source: diagnostics
  firmware_tested: "V8.01.02"
  last_validated: "2026-01-05"

attribution:
  contributors:
    - github: m4dh4tt3r-88
      contribution: "[Issue #38](https://github.com/solentlabs/cable_modem_monitor/issues/38) diagnostics"

isps:
  - Comcast
  - Cox
  - Spectrum
  - Xfinity

notes: |
  Nighthawk DOCSIS 3.1 modem with 2.5 Gbps max downstream speed.
  32 SC-QAM downstream channels plus OFDM (DOCSIS 3.1).
  Provides system uptime and time data (unlike CM600).
  Reboot via RouterStatus.htm with buttonSelect values and dynamic session ID.

references:
  product_page: "https://www.netgear.com/home/wifi/modems/cm2000/"
  support: "https://www.netgear.com/support/product/cm2000"

# ARRIS SB6190 Configuration
# Source: Community contribution (sfennell, [PR #22](https://github.com/solentlabs/cable_modem_monitor/pull/22))

manufacturer: ARRIS
model: SB6190
paradigm: html

hardware:
  docsis_version: "3.0"
  chipset: Intel Puma 6
  release_date: "2016"

# Provenance tracking
sources:
  auth_config: "[Issue #93](https://github.com/solentlabs/cable_modem_monitor/issues/93) - HAR capture from @HenryGeorge1978"
  detection_hints: "[PR #22](https://github.com/solentlabs/cable_modem_monitor/pull/22)"

default_host: "192.168.100.1"

auth:
  # SB6190 has two firmware variants with different auth:
  # - Older firmware: No auth required (public status page)
  # - Newer firmware (9.1.103+): AJAX-based login required
  # See: https://github.com/solentlabs/cable_modem_monitor/issues/93
  #
  # User selects their auth type during config flow.
  types:
    none: null # Older firmware - no auth needed
    form_ajax: # Newer firmware (9.1.103+) - AJAX login required
      endpoint: "/cgi-bin/adv_pwd_cgi"
      nonce_field: "ar_nonce"
      nonce_length: 8
      arguments_field: "arguments"
      credential_format: "username={username}:password={password}"
      success_prefix: "Url:"
      error_prefix: "Error:"

pages:
  public:
    - "/cgi-bin/status"

  protected: []

  data:
    downstream_channels: "/cgi-bin/status"
    upstream_channels: "/cgi-bin/status"

parser:
  class: ArrisSB6190Parser
  module: custom_components.cable_modem_monitor.modems.arris.sb6190.parser
  format:
    type: html
    table_layout: standard

detection:
  pre_auth:
    - "SB6190"
    - "ARRIS"
    - "Downstream Bonded Channels"
  post_auth:
    - "SB6190"
    - "ARRIS SB6190"
    - "Downstream Bonded Channels"
  page_hint: "/cgi-bin/status"

capabilities:
  - scqam_downstream
  - scqam_upstream

# =============================================================================
# STATUS
# =============================================================================
status_info:
  status: awaiting_verification
  verification_source: "https://github.com/solentlabs/cable_modem_monitor/issues/83"

# =============================================================================
# METADATA
# =============================================================================
fixtures:
  path: modems/arris/sb6190/fixtures
  source: diagnostics
  firmware_tested: "*"
  last_validated: "2026-01-05"

attribution:
  contributors:
    - github: sfennell
      contribution: "[PR #22](https://github.com/solentlabs/cable_modem_monitor/pull/22) verification"

isps:
  - Comcast
  - Cox
  - Spectrum
  - TWC

notes: |
  Two firmware variants with different auth requirements:
  - Older firmware: No authentication required
  - Newer firmware (9.1.103+): AJAX-based login required

  AJAX auth uses JavaScript XMLHttpRequest instead of traditional form.
  Credentials: base64(urlencode("username=X:password=Y"))
  Nonce: 8 random digits (client-generated)
  Response: "Url:/path" (success) or "Error:msg" (failure)

  Parser based on SB6141 code; fixture provenance unknown.
  URL format differs from SB6141: uses .html extension vs .asp

references:
  issue_93: "https://github.com/solentlabs/cable_modem_monitor/issues/93"
  issue_83: "https://github.com/solentlabs/cable_modem_monitor/issues/83"
  pr_22: "https://github.com/solentlabs/cable_modem_monitor/pull/22"
  source_code: "https://sourceforge.net/projects/sb6190.arris/"
